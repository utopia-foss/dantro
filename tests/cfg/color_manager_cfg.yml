# Test configurations of the dantro ColorManager
#
# NOTE
#   - In `_test_cmap`, the keys need to be float values in [0, 1] OR
#     integer values in [0, n_colors - 1]
---
minimal: {}


minimal_vmin_vmax:
  ### START -- minimal_vmin_vmax
  cmap:
    name: viridis
    # ... can have more arguments here
  vmin: 0
  vmax: 10
  ### END ---- minimal_vmin_vmax
  _title: with colormap and vmin/vmax


extremes_and_norm:
  ### START -- extremes_and_norm
  cmap:
    name: magma
    under: grey
    over: white
    bad: red
  norm:
    name: LogNorm
  vmin: 1
  vmax: 10
  ### END ---- extremes_and_norm
  _title: magma + extremes with LogNorm


reversed:
  cmap:
    name: viridis
    reversed: true
  vmin: 0
  vmax: 10


from_centers:
  ### START -- from_values_and_labels
  cmap:
    from_values:
      0: r
      1: g
      4: b
    bad: w
    over: w
    under: w
  labels:
    0: foo
    1: bar
    4: baz
  ### END ---- from_values_and_labels
  _title: ListedColormap and custom labels
  _test_cmap:
    0.0: r
    0.5: g
    1.0: b


from_intervals:
  ### START -- from_intervals
  cmap:
    from_values:
      [-.5, 0.5]: r
      [0.5, 1.5]: ~         # None â†’ will use placeholder color
      [1.5, 4.5]: b
    placeholder_color: w    # default: white
  ### END ---- from_intervals
  _title: ListedColormap from bin edges


# -- Seaborn support ----------------------------------------------------------

seaborn_cmap_rocket:
  cmap: rocket


seaborn_cmap_paired:
  cmap: Paired
  vmin: -2
  vmax: 10
  cbar_kwargs:
    extend: both


seaborn_custom_palette_light_blue:
  cmap:
    name: color_palette::light:b


seaborn_custom_palette_dark_blue:
  cmap:
    name: color_palette::dark:b


seaborn_custom_palette_named:
  cmap:
    name: color_palette::icefire


seaborn_custom_palette_named_reversed:
  cmap:
    name: color_palette::icefire_r


seaborn_custom_palette_dark:
  cmap:
    name: color_palette::dark:salmon_r


seaborn_custom_palette_from_color:
  cmap:
    name: color_palette::light:#69d


seaborn_custom_palette_from_color_reversed:
  cmap:
    name: color_palette::light:#69d_r


seaborn_custom_palette_cubehelix:
  cmap:
    name: "color_palette::ch:start=.2,rot=-.3"


seaborn_custom_palette_brewer:
  cmap:
    name: color_palette::YlOrBr


seaborn_diverging_only_args:
  cmap:
    name: diverging::220,20


seaborn_diverging_args_and_kwargs:
  cmap:
    name: diverging::145, 300, s=60


seaborn_diverging_dark_center:
  cmap:
    name: diverging::250, 30, l=65, center=dark


seaborn_color_palette_example:
  ### START -- seaborn_color_palette_example
  cmap:
    name: color_palette::light:#69d
  vmin: 0
  vmax: 10
  ### END ---- seaborn_color_palette_example
  cbar_kwargs:
    extend: both

seaborn_diverging_example:
  ### START -- seaborn_diverging_example
  cmap:
    name: diverging::250, 30, l=65, center=dark
    under: w
    over: w
  vmin: -5
  vmax: +5
  ### END ---- seaborn_diverging_example


err_seaborn_diverging_missing_args:
  cmap:
    name: diverging::250
  _raises: ValueError
  _match: "TypeError: .* missing 1 required positional"


err_seaborn_diverging_bad_args:
  cmap:
    name: 'diverging::250, 30, l=65, invalid="foo"'
  _raises: ValueError
  _match: Failed constructing .* unexpected keyword argument





# -- Categorical --------------------------------------------------------------

cat_from_list: &cat_from_list
  cmap:
    from_values:
      - green
      - blue
      - red
      - orange
    under: white
    over: white
  labels:
    - first
    - second
    - third
    - fourth
  _test_cmap: &cat_cmap
    0.0: green
    0.3334: blue
    0.6666: red
    1.0: orange
  _test_attrs: &cat_attrs
    labels: &cat_labels
      0: first
      1: second
      2: third
      3: fourth
    vmin: -0.5
    vmax: 3.5


cat_from_list_shortcut:
  ### START -- from_values_shortcut
  cmap:
    - green
    - blue
    - red
    - orange
  labels:
    - first
    - second
    - third
    - fourth
  ### END ---- from_values_shortcut
  _test_cmap: *cat_cmap
  _test_attrs: *cat_attrs


cat_from_list_with_vmin_vmax:
  <<: *cat_from_list
  vmin: 0
  vmax: 3
  _test_attrs:
    <<: *cat_attrs


cat_from_list_with_vmin_vmax_not_discretized:
  <<: *cat_from_list
  vmin: 0
  vmax: 3
  discretized: false
  _test_attrs:
    <<: *cat_attrs
    vmin: 0
    vmax: 3


cat_labels_and_colors_implicit:
  ### START -- labels_and_colors_implicit
  cmap:
    first: green
    second: blue
    third: red
    fourth: orange

    # can also specify extremes here
    under: k
    over: w
  ### END ---- labels_and_colors_implicit
  _title: labels and colors shorthand syntax
  _test_cmap: *cat_cmap
  _test_attrs:
    <<: *cat_attrs


cat_labels_and_colors_explicit:
  ### START -- labels_and_colors_explicit
  cmap:
    labels_and_colors:
      # can use restricted labels here
      name: green
      colors: blue
      reversed: red
      gamma: orange
    under: k
    over: w
  ### END ---- labels_and_colors_explicit
  _title: labels and colors (explicit) shorthand
  _test_cmap: *cat_cmap
  _test_attrs:
    <<: *cat_attrs
    labels:
      0: name
      1: colors
      2: reversed
      3: gamma


cat_labels_and_colors_overwrite_labels:
  cmap:
    first: green
    second: blue
    third: red
    fourth: orange
    under: k
    over: w
  labels:
    0: FIRST
    1: SECOND
    2: THIRD
    3: FOURTH
  _test_cmap: *cat_cmap
  _test_attrs:
    <<: *cat_attrs
    labels:
      0: FIRST
      1: SECOND
      2: THIRD
      3: FOURTH


cat_labels_and_colors_shifted: &labels_and_colors_shifted
  ### START -- labels_and_colors_shifted
  cmap:
    first: green
    second: blue
    third: red
    fourth: orange

    under: k
    over: w
  vmin: 2
  vmax: ~
  ### END ---- labels_and_colors_shifted
  _title: labels and colors over custom integer range
  _test_cmap: *cat_cmap
  _test_attrs: &cat_attrs_shifted
    <<: *cat_attrs
    labels:
      2: first
      3: second
      4: third
      5: fourth
    vmin: 1.5
    vmax: 5.5


cat_labels_and_colors_shifted_not_discretized:
  <<: *labels_and_colors_shifted
  discretized: false
  _test_cmap: *cat_cmap
  _test_attrs:
    <<: *cat_attrs_shifted
    vmin: 2
    vmax: 5.5


cat_labels_and_colors_shifted_from_vmax:
  <<: *labels_and_colors_shifted
  vmin: ~
  vmax: 5
  _test_cmap: *cat_cmap
  _test_attrs:
    <<: *cat_attrs_shifted


cat_labels_and_colors_shifted_from_vmax_not_discretized:
  <<: *labels_and_colors_shifted
  vmin: ~
  vmax: 5
  discretized: false
  _test_cmap: *cat_cmap
  _test_attrs:
    <<: *cat_attrs_shifted
    vmin: 1.5
    vmax: 5


cat_labels_and_colors_float_vmin_vmax:
  <<: *labels_and_colors_shifted
  vmin: 1.9
  vmax: 5.2
  _test_cmap: *cat_cmap
  _test_attrs:
    <<: *cat_attrs_shifted
    vmin: 1.5
    vmax: 5.5


cat_labels_and_colors_float_vmin_vmax_not_discretized:
  <<: *labels_and_colors_shifted
  vmin: 1.9
  vmax: 5.2
  discretized: false
  _test_cmap: *cat_cmap
  _test_attrs:
    <<: *cat_attrs_shifted
    vmin: 1.9
    vmax: 5.2


cat_skip_vals_and_labels:
  ### START -- skip_vals_and_labels
  cmap:
    first: green
    second: blue
    " ": ~
    fourth: orange
    "  ": ~

    under: k
    over: w
  ### END ---- skip_vals_and_labels
  _title: with certain values (and labels) skipped



err_cat_bad_vmin_vmax:
  <<: *labels_and_colors_shifted
  vmin: 5
  vmax: 7

  _raises: ValueError
  _match: Failed to infer data positions


err_cat_bad_vmin_vmax_float:
  <<: *labels_and_colors_shifted
  vmin: 4.9
  vmax: 7.1

  _raises: ValueError
  _match: Failed to infer data positions


err_cat_labels_and_colors_explicit:
  cmap:
    # cannot specify both
    labels_and_colors:
      name: green
      colors: blue
      reversed: red
      gamma: orange
    foo: red
    bar: orange

  _raises: ValueError
  _match: explicit `labels_and_colors` argument


err_cat_labels_and_colors_with_name:
  cmap:
    first: green
    second: blue
    third: red
    fourth: orange
    name: foobar

  _raises: ValueError
  _match: Cannot use argument `name`


err_cat_labels_and_colors_with_continuous:
  cmap:
    first: green
    second: blue
    third: red
    fourth: orange
    continuous: true

  _raises: ValueError
  _match: Cannot use the shorthand syntax for specifying labels and colors


err_cat_labels_and_colors_with_from_values:
  cmap:
    first: green
    second: blue
    third: red
    fourth: orange
    from_values:
      - foo
      - bar

  _raises: ValueError
  _match: Cannot use the shorthand syntax for specifying labels and colors


# -- Color syntax -------------------------------------------------------------

color_syntax_simple:
  cmap:
    name: Greys
    under: red
    over: blue
  vmin: 0
  vmax: 10
  labels:
    0: 0
    1.25: 1.25
    2.5: 2.5
    5: 5
    10: 10
  _test_cmap:
    -0.1: red
    0.0: white
    1.0: black
    +1.1: blue


color_syntax_advanced:
  ### START -- color_syntax_advanced
  cmap:
    name: viridis
    under:
      color: blue
      alpha: 0.5
    over:
      color: red
      alpha: 0.5
    bad: darkred
  ### END ---- color_syntax_advanced
  _title: alpha values for extremes
  vmin: 0
  vmax: 10


# -- Colorbar stuff -----------------------------------------------------------

cbar_horizontal:
  cbar_kwargs:
    orientation: horizontal
    label: my cbar label


cbar_custom_label_and_tick_params:
  cbar_kwargs:
    orientation: horizontal
    label: my cbar with custom label and tick parameters
    label_kwargs:
      color: red
      fontsize: 9
    tick_params:
      labelsize: 9
      labelcolor: blue
      labelrotation: 45


cbar_extend_auto_under:
  cmap:
    under: blue
  vmin: 0


cbar_extend_auto_over:
  cmap:
    over: red
  vmax: 10


cbar_extend_suppressed:
  cmap:
    under: blue
    over: red
  vmin: 0
  vmax: 10
  cbar_kwargs:
    extend: neither




# -- Different norms ----------------------------------------------------------

norm_Normalize:
  norm: Normalize


norm_BoundaryNorm:
  cmap:
    from_values:
      - tab:green
      - tab:red
      - tab:blue
      - tab:orange
    under: k
    over: w
  norm:
    name: BoundaryNorm
    boundaries: [0, 1, 2, 3, 4]
    ncolors: 4
  labels:
    0.5: 0.5
    1.5: 1.5
    2.5: 2.5
    3.5: 3.5


norm_NoNorm:
  norm: NoNorm


norm_LogNorm:
  norm: LogNorm


norm_PowerNorm:
  norm:
    name: PowerNorm
    gamma: 0.5


norm_SymLogNorm:
  norm:
    name: SymLogNorm
    linthresh: 1.


norm_TwoSlopeNorm:
  ### START -- norm_TwoSlopeNorm
  cmap:
    name: coolwarm
    over: red
    under: blue
  norm:
    name: TwoSlopeNorm
    vcenter: 0
  vmin: -5
  vmax: 10
  ### END ---- norm_TwoSlopeNorm




# --- Continuous Colormap -----------------------------------------------------

continuous:
  ### START -- continuous_default_norm
  cmap:
    continuous: true
    from_values:
      0: '#EC7070'
      0.5: '#EC9F7E'
      1: black
    under: grey
    over: white
  vmin: 0
  vmax: 10
  ### END ---- continuous_default_norm


continuous_with_placeholder:
  cmap:
    continuous: true
    from_values:
      0: '#EC7070'
      0.5: ~
      1: black


continuous_lognorm:
  ### START -- continuous_lognorm
  cmap:
    continuous: true
    from_values:
      0: '#EC7070'
      0.5: '#EC9F7E'
      1: black
    under: grey
    over: white
    bad: red
  norm:
    name: LogNorm
  vmin: 1
  vmax: 10
  ### END ---- continuous_lognorm
  _title: LinearSegmentedColormap with LogNorm


continuous_with_boundaries:
  ### START -- continuous_with_boundaries
  cmap:
    continuous: true
    from_values:
      0: "#EC7070"
      0.5: "#EC9F7E"
      1: black
    under: grey
    over: white
    bad: red
  norm:
    name: BoundaryNorm
    ncolors: 256
    boundaries: [-2, 2, 6, 8, 9, 10]
  ### END ---- continuous_with_boundaries
  _title: LinearSegmentedColormap with BoundaryNorm


continuous_vmin_vmax:
  cmap:
    continuous: true
    from_values:
      0: '#EC7070'
      0.5: ~
      1: black
    under: k
    over: w
  vmin: 0
  vmax: 10


# -- YAML constructor ---------------------------------------------------------

from_yaml_scalars:
  cmap: !cmap PiYG
  norm: !cmap_norm CenteredNorm


from_yaml_mappings:
  ### START -- yaml_constructors
  cmap: !cmap         # will create a matplotlib.colors.Colormap object
    continuous: true
    from_values:
      0: "#EC7070"
      0.5: "#EC9F7E"
      1: black
    bad: white
  norm: !cmap_norm    # will create a matplotlib.colors.Normalize object
    name: Normalize
    vmin: 0
    vmax: 10
    clip: true
  ### END ---- yaml_constructors



# -- Failing configurations ---------------------------------------------------

err_invalid_norm:
  norm: norrrm

  _raises: ValueError
  _match: invalid norm specifier 'norrrm'


err_invalid_cmap:
  cmap: cmappp

  _raises: ValueError
  _match: is not a valid value.*supported.*viridis


err_disconnected_intervals:
  cmap:
    from_values:
      [0,1]: r
      [2,3]: g

  _raises: ValueError
  _match: Received disconnected intervals


err_decreasing_boundaries:
  cmap:
    from_values:
      [1,0]: r

  _raises: ValueError
  _match: Received decreasing boundaries


err_single_bin_center:
  cmap:
    from_values:
      0: r

  _raises: ValueError
  _match: At least 2 bin centers must be given to create a BoundaryNorm
